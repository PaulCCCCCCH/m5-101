<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IceWould Training Hub">
    <meta name="author" content="IceWould Training Team Led by Chonghan Chen">
    <link rel="canonical" href="https://paulcccccch.github.io/content/web-crawler/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Project 3: Web Crawler 网络爬虫 - m5-101</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">m5-101</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../home/">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../..">Schedule</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Notes <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../introduction/">Introduction</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Notebook Pages <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../hello-world/">Hello World</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://github.com/PaulCCCCCCH/m5-101/edit/master/docs/content/web-crawler.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#project-3-web-crawler">Project 3: Web Crawler 网络爬虫</a></li>
            <li class="second-level"><a href="#_1">引言</a></li>
                
            <li class="second-level"><a href="#_2">准备工作</a></li>
                
            <li class="second-level"><a href="#section-1">Section 1: 页面下载</a></li>
                
            <li class="second-level"><a href="#section-2">Section 2: 微调</a></li>
                
            <li class="second-level"><a href="#section-3">Section 3: 建立简单索引</a></li>
                
            <li class="second-level"><a href="#section-4">Section 4: 项目名查询</a></li>
                
            <li class="second-level"><a href="#section-5">Section 5: 建立进一步索引</a></li>
                
            <li class="second-level"><a href="#section-6">Section 6: 全局搜索</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="project-3-web-crawler">Project 3: Web Crawler 网络爬虫</h1>
<h2 id="_1">引言</h2>
<p>时光飞逝。转眼间，小王已经大三了。这么多年来，他一直怀有出国读研的梦想。而现在，正是申请研究生的大好时机。只是，他对申研毫无头绪，不知道从什么地方入手：这么多学校，我怎么知道谁家的研究生更适合我呢？我该上哪去搜索相关的信息呢？<br />
<br></p>
<p>他去某度搜索“牛津大学数学系研究生申请”，得到的只有铺天盖地的野鸡中介的广告。听小明说，你是一位会用 <code>Python</code> 写程序大佬，上次帮他解决过工作上遇到的难题。于是，经小明的推荐，小王找到了你，希望你能帮帮他。<br />
<br></p>
<p>你回想起最近在学习的爬虫，眉头一皱，发现事情可以很简单。一次简单的开发，可以满足很多人的需求。于是，你欣然接下了这个请求<strike>，并且要求小王请自己吃饭</strike>。</p>
<h2 id="_2">准备工作</h2>
<p>请下载初始代码。
<a href="">下载链接</a></p>
<h2 id="section-1">Section 1: 页面下载</h2>
<p>以牛津的<a href="https://www.ox.ac.uk/admissions/graduate/courses/courses-a-z-listing">硕士项目列表</a>为例。<br />
<br></p>
<p>这个页面上，每一个硕士/博士项目名，都是一个可以点击的超链接。点击进入后，可以看到项目的具体介绍，而这正是我们想要的东西。<br />
<br></p>
<p>在这个部分，我们需要把每个<strong>硕士项目</strong>的具体介绍页面的 <code>html</code> 文件下载下来，命名为这个项目的名称，保存在本地。<br />
<br></p>
<p>提示：<br />
1. 你可以新创建一个文件夹，叫 <code>oxford</code>，运行脚本后，里面有 <code>advanced-computer-science.html</code>，<code>african-studies.html</code>, <code>ancient-philosophy.html</code> 等等几十个文件（注意命名格式，是小写字母 + 短横线）。
2. 我们只关心硕士项目（M 开头的学位）。比如，<code>Msc</code>，<code>MSt</code>, <code>MTh</code>, <code>MPhil</code> 等都是我们要下载的，而 <code>D</code> 打头的博士学位项目，以及 <code>PG</code> 打头的继续教育项目，需要直接跳过。</p>
<h2 id="section-2">Section 2: 微调</h2>
<p>我们在以上程序的基础上，进行微调，爬取以下学校的项目介绍，并且每一个大学是一个单独的文件夹。<br />
- <a href="http://catalog.illinois.edu/graduate/">UIUC</a><br />
- <a href="https://www.imperial.ac.uk/study/pg/courses/">帝国理工</a><br />
- <a href="https://www.postgraduate.study.cam.ac.uk/courses">剑桥大学</a>  </p>
<p>你打算先拿上面几所学校做一下实验。比较热门的学校可能有一百来所，你打算找几个同样懂爬虫的朋友，分一下工，大概一天时间就能全部爬下来。<br />
<br></p>
<h2 id="section-3">Section 3: 建立简单索引</h2>
<p>光有数据，其实用处不大；从数据中提取的信息，才有价值。为了让提取信息的过程更加高效，我们要对数据进行<strong>预处理</strong>。<br />
<br></p>
<p>正常情况下，我们需要建立一个<strong>关系型数据库</strong>来高效地存储预处理之后的信息，不过这有点点超纲。我们先用普通的文件来存储。<br />
<br></p>
<p>首先，我们遍历所有文件夹里的所有 <code>html</code> 文件。对于其中的每一个文件，我们提取以下信息（JSON 格式，以帝国理工 <code>Advanced Computer Science 为例</code>）：  </p>
<pre><code class="language-json">{
    &quot;school_name&quot;: &quot;Oxford&quot;,
    &quot;program_name&quot;: &quot;Advanced Computer Science&quot;,
    &quot;file_path&quot;: &quot;./oxford/advanced-computer-science.html&quot;,
    &quot;program_description&quot;: &quot;.....&quot;
}
</code></pre>
<p>每一个 <code>html</code> 文件都是这样一个 <code>json</code> 文件。请把所有的 <code>object</code> 保存下来，放在一个名为 <code>programs.json</code> 的文件。<br />
<br></p>
<p>注意：<code>program_description</code> 字段，即是 <code>html</code> 页面的内容。但是，请进行处理以下处理<br />
- 消除所有 <code>&lt;script&gt;&lt;/script&gt;</code> 标签中间的全部内容。<br />
- 消除所有 <code>html</code> 标签，以及特殊符号。 <br />
- （总之，越干净越好，最好只保留文字信息）。<br />
<br></p>
<p>如果忘记了怎么用 <code>python</code> 管理文件，可以回顾一下<a href="../file-management">文件管理</a>这一章的内容。<br />
<br></p>
<h2 id="section-4">Section 4: 项目名查询</h2>
<p>索引建立好之后，我们需要另外写一个脚本 <code>search.py</code>，方便用户搜索信息。<br />
<br></p>
<p>这个脚本的需求如下：<br />
1. 需要读取 <code>programs.json</code> 的所有内容，保存成一个 <code>字典</code>。<br />
2. 需要用 <code>input</code> 函数监听用户的输入，然后。<br />
3. 在字典里面搜索<strong>所有<code>program_name</code>包含用户输入</strong>的项目并打印。<br />
<br></p>
<p>比如，我想申请数学系的研究生，于是我输入 <code>math</code> 这个关键词，程序就会输出所有我可能感兴趣的项目。<br />
<br></p>
<h2 id="section-5">Section 5: 建立进一步索引</h2>
<h2 id="section-6">Section 6: 全局搜索</h2></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <script src="../../assets/mathjaxhelper.js"></script>

    <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
